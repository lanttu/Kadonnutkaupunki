<!DOCTYPE html> 
 
<html> 
  <head> 
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 

    <script  src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript"></script>
    <script src="setup.js" type="text/javascript"></script>
    <script type="text/javascript">

        
$(document).ready(function() {


    var typeElement = $( "#path-type" );
    for ( var i in pathTypes ) {
        $( "<option>" ).val( i ).text( i ).appendTo( typeElement );
    }

    $( "#convert" ).click(function() {
       
       var lines = $( "#source" ).val().split( /\n/ );
       
       var paths = "";
       var firstCoord;
       var currentPath = null;
       for ( var i in lines ) {

           var line = lines[i];
            if ( line.match(/PLINE \d*/) ) {
                // New path
                // console.info( "NL: " + line );
                if ( currentPath ) {
                    currentPath += "\r\n";
                    paths += currentPath ;
                }
                firstCoord = true;
                currentPath = " gwikipath::";

            } else if ( line.match(/^\d*.\d* \d*.\d*$/) ) {
                // Coordinate
                // console.info( "COORD: " + line );
                var coords = line.split( " " );
                if ( coords.length == 2 ) {
                    if ( firstCoord ) {
                        firstCoord = false;
                    } else {
                        currentPath += ",";
                    }
                    currentPath += " [" + coords[1] + ", " + coords[0] + "]";
                }
            }
        }

        // Add last path
        if ( currentPath ) {
            currentPath + "\r\n";
            paths += currentPath ;
        }

        paths += "\r\n gwikidata:: yes";
        paths += "\r\n type:: " + typeElement.val();

        $( "#result" ).val( paths );
        console.info(paths);
        
    });


});
    </script>




  </head> 
  <body> 
    <h3>Reitin tyyppi</h3>
    <select id="path-type">
    </select>
    <h3>Koordinaattitiedot</h3>
    <textarea style="width:100%; height: 300px" id="source"></textarea>
    <input type="submit" value="Muunna" id="convert"/>
    <h3>Tulos</h3>
    <textarea style="width:100%; height: 300px" id="result"></textarea>
  </body> 
</html>  
